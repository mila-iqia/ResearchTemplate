[project]
name = "research_project_template"
description = "Research Project Template"
authors = [
    {name = "Fabrice Normandin", email = "normandf@mila.quebec"},
    {name = "César Miguel Valdez Córdova", email = "cesar.valdez@mila.quebec"}
]
requires-python = ">= 3.12"
dependencies = [ "torch-jax-interop>=0.0.7,<0.1"]
dynamic = ["version"]

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
packages = ["project"]


[tool.pixi.project]
channels = ["nvidia/label/cuda-12.4.0", "nvidia", "conda-forge", "pytorch"]
platforms = ["linux-64"]

[tool.pixi.pypi-dependencies]
ResearchTemplate = { path = ".", editable = true }

[tool.pixi.tasks]
lint = "pre-commit run --all-files"
test = {"cmd" = "pytest", depends-on=["lint"]}


[tool.pixi.dependencies]
cuda = {version = "*", channel="nvidia/label/cuda-12.4.0"}
pytorch = {version = ">=2.2.1,<2.4", channel="pytorch"}
torchvision = {version = ">=0.17.1,<0.19", channel="pytorch"}
pytorch-cuda = {version = ">=12.4,<13", channel="pytorch"}
hydra-core = ">=1.3.2,<1.4"
rich = ">=13.7.1,<13.8"
tqdm = ">=4.66.4,<4.67"
hydra-zen = ">=0.13.0,<0.14"
lightning = ">=2.3.3,<2.4"
gdown = ">=5.2.0,<5.3"
hydra-submitit-launcher = ">=1.2.0,<1.3"
wandb = ">=0.16.6,<0.17"
hydra-colorlog = ">=1.2.0,<1.3"
matplotlib = ">=3.9.1,<3.10"
moviepy = ">=1.0.3,<1.1"
pygame = ">=2.6.0,<2.7"
jax = ">=0.4.28,<0.5"
tensorboard = ">=2.17.0,<2.18"
simple-parsing = ">=0.1.5,<0.2"
pydantic = ">=2.8.2,<2.9"

[tool.pixi.feature.dev.dependencies]
pytest = "*"
pytest-timeout = "*"
pytest-regressions = "*"
pytest-skip-slow = "*"
pytest-env = "*"
pytest-xdist = "*"
ruff = "*"
pytest-benchmark = "*"
pytest-cov = "*"

[tool.pixi.environments]
test = ["dev"]
